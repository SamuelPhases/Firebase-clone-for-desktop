!function(t,i){"use strict";"undefined"==typeof t.smg&&(t.smg={}),"undefined"==typeof t.smg.aem&&(t.smg.aem={}),"undefined"==typeof t.smg.aem.templates&&(t.smg.aem.templates={}),"undefined"==typeof t.smg.aem.templates.home&&(t.smg.aem.templates.home={});var e=t.smg.aem.varStatic,s=t.smg.aem.util,n=t.smg.aem.customEvent,o=t.smg.aem.templates.home;o.lazy=function(){var o={section:"js-home-components",clusterDivs:".ho-g-one-tile",loader:".sc-loader"};return{init:function(t,n){(this.container=t).size()&&(this.opts=s.def(o,n||{}),this.IE_LT_8=i("body").hasClass(e.SUPPORT.IE_LT_8),this.imgType=e.DATA_ATTR.DATA_SRC,this.secMax=0,this.secCnt=0,this.setElements(),this.setMoveClusterDevice(),this.onBindEvent(),s.isAemEditMode()?this.setAemEditMode():this.setWaypoint())},setElements:function(){this.allSections=this.container.find("."+this.opts.section),this.getMoveClustDivs()},getMoveClustDivs:function(){this.clusterDivs=this.container.find(this.opts.clusterDivs).parent().find("> div:not(.parbase)")},onBindEvent:function(){this.IS_MOBILE_MODE=!1,this.container.on(n.RESPONSIVE.CHANGE,i.proxy(this.onResponsiveChange,this)),this.container.trigger(n.RESPONSIVE.GET_STATUS),i(t).on("resize",i.proxy(this.onResizeListener,this)),this.onResizeListener(),this.secMax=this.allSections.size()},setMoveClusterDevice:function(){if(this.clusterDivs.find("section").filter("[data-movecluster-opt]").length){var t=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e=/android/i.test(navigator.userAgent),s=[];if(t!==!1||e!==!1){var n=0;this.clusterDivs.each(function(t){var e=i(this);e.find("> section").filter("[data-movecluster-opt]").length&&(s[n]=[e.find("> section").data("movecluster-opt").moveToIndex,e.find("> section").attr("id"),t],n+=1)}),s.sort(function(t,i){return t[0]-i[0]});for(var o=0;o<s.length;o++){var a=i("#"+s[o][1]).parent(),h=a.find("> section").data("movecluster-opt"),r=s[o][2],c=s[o][0];"iOS"===h.type&&t&&(r>=c-1?a.insertBefore(this.clusterDivs.eq(c-1)):a.insertAfter(this.clusterDivs.eq(c-1)),this.getMoveClustDivs()),"Android"===h.type&&e&&(r>=c-1?a.insertBefore(this.clusterDivs.eq(c-1)):a.insertAfter(this.clusterDivs.eq(c-1)),this.getMoveClustDivs())}this.allSections=this.container.find("."+this.opts.section)}}},setAemEditMode:function(){for(var t,i=this.allSections.filter(":not(."+e.CSS.JS_IMG_LAZY_LOADED+")").find("."+e.CSS.JS_IMG_SRC),s=0,n=i.size();n>s;s++)t=i.eq(s),this.IE_LT_8?t.attr("src",t.attr(this.imgType)):this.imgChangeLoader(t,t.attr(this.imgType));this.hideLoader(),this.allSections.css({"min-height":"",height:""}).addClass(e.CSS.JS_IMG_LAZY_LOADED).animate({opacity:1})},getMinHeight:function(t,i,e,n){var o=(e-n)/(t-i),n=e-(t-s.winSize().w)*o;return Math.min(n,e)},setWaypoint:function(){var e=this;i.each(this.allSections,function(s){var n=i(this),o=n.data("minheight-opt");n.attr("data-sec-idx",s),o&&(o=e.IS_MOBILE_MODE?o.mobile:o.pc),o&&n.css("height",e.getMinHeight(o.maxWidth,o.minWidth,o.maxHeight,o.minHeight)),new t.Waypoint({element:n.get(0),handler:function(t){this.destroy(),e.setClusterLoad(i(this.element).attr("data-sec-idx"))},offset:"100%"})})},setClusterLoad:function(t){var i,s=this,n=this.allSections.eq(t),o=n.find("."+e.CSS.JS_IMG_SRC),a=o.size(),h=0,r=n.hasClass("s-slick"),c=n.find(".s-slick");this.IE_LT_8&&(n.addClass(e.CSS.JS_IMG_LAZY_LOADED),setTimeout(function(){r?n.slick("setPosition"):c.size()&&c.slick("setPosition"),n.css({"min-height":"",height:""}).addClass(e.CSS.JS_IMG_LAZY_LOADED),n.animate({opacity:1}),s.setNextCluster()},500));for(var d=0,m=o.size();m>d;d++){var i=o.eq(d);this.IE_LT_8?i.attr("src",i.attr(s.imgType)):this.imgChangeLoader(i,i.attr(s.imgType),function(){h++,h>=a&&(r?n.slick("setPosition"):c.size()&&c.slick("setPosition"),n.css({"min-height":"",height:""}).addClass(e.CSS.JS_IMG_LAZY_LOADED),n.animate({opacity:1}),s.setNextCluster())})}},setNextCluster:function(){0===this.secCnt&&this.hideLoader(),this.secCnt++},hideLoader:function(){},onResponsiveChange:function(t,i){var s,n=this,o=this.allSections.filter("."+e.CSS.JS_IMG_LAZY_LOADED).find("."+e.CSS.JS_IMG_SRC);i.RESPONSIVE_NAME===e.RESPONSIVE.MOBILE.NAME?(this.imgType=e.DATA_ATTR.SRC_MOBILE,this.IS_MOBILE_MODE=!0):(this.imgType=e.DATA_ATTR.SRC_PC,this.IS_MOBILE_MODE=!1),this.IE_LT_8&&(this.imgType=e.DATA_ATTR.SRC_PC);for(var a=0,h=o.size();h>a;a++)s=o.eq(a),n.IE_LT_8?s.attr("src",s.attr(n.imgType)):n.imgChangeLoader(s,s.attr(n.imgType))},onResizeListener:function(){var t=this,s=this.allSections.filter(":not(."+e.CSS.JS_IMG_LAZY_LOADED+")");i.each(s,function(){var e=i(this).data("minheight-opt");e&&(e=t.IS_MOBILE_MODE?e.mobile:e.pc),e&&i(this).css("height",t.getMinHeight(e.maxWidth,e.minWidth,e.maxHeight,e.minHeight))})},imgChangeLoader:function(t,e,n){n=n||function(){},s.imgLoader(i("<img>").attr("src",e),function(){return t.attr("src")===e?n():(t.attr("src",e),void n())})}}}(),i(function(){o.lazy.init(i("body"))})}(window,window.jQuery);
